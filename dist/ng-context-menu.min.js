angular.module("ng-context-menu",[]).service("contextMenu",function(){var e,n,t=[];e=function(e){e.removeClass("open"),t.forEach(function(n){n.element===e&&(n.isOpen=!1)})},n=function(n,o){var u;t.forEach(function(n){n.element===o?u=n:n.isOpen&&(e(n.element),n.isOpen=!1)}),u||(u={isOpen:!1,element:o},t.push(u)),u.isOpen||(o.css("top",n.offsetY+"px"),o.css("left",n.offsetX+"px"),o.addClass("open"),u.isOpen=!0)},this.closeMenu=e,this.openMenu=n}).directive("contextMenu",["$window","$parse","contextMenu",function(e,n,t){return{restrict:"A",link:function(o,u,i){function c(e){!s||l||2===e.button&&e.target===a||o.$apply(function(){t.closeMenu(s)})}var s,a,l=o.$eval(i.contextMenuDisabled),p=angular.element(e),f=n(i.contextMenu);u.bind("contextmenu",function(e){l||(void 0===s&&(s=angular.element(document.getElementById(i.target))),a=e.target,e.preventDefault(),e.stopPropagation(),o.$apply(function(){f(o,{$event:e}),t.openMenu(e,s)}))}),p.bind("keyup",function(e){s&&!l&&27===e.keyCode&&o.$apply(function(){t.closeMenu(s)})}),p.bind("click",c),p.bind("contextmenu",c)}}}]);